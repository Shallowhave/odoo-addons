<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- 发货标签用户组 -->
    <record id="group_delivery_label_user" model="res.groups">
        <field name="name">发货标签用户</field>
        <field name="comment">可以创建、查看和打印发货标签</field>
    </record>

    <!-- 发货标签管理员组 -->
    <record id="group_delivery_label_manager" model="res.groups">
        <field name="name">发货标签管理员</field>
        <field name="implied_ids" eval="[(4, ref('group_delivery_label_user'))]"/>
        <field name="comment">可以管理发货标签模板和所有发货标签</field>
    </record>

    <!-- 记录规则：用户只能看到自己创建的标签 -->
    <record id="delivery_label_rule_user" model="ir.rule">
        <field name="name">发货标签：用户规则</field>
        <field name="model_id" ref="model_delivery_label"/>
        <field name="domain_force">['|', ('create_uid', '=', user.id), ('print_user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('group_delivery_label_user'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <!-- 记录规则：管理员可以看到所有标签 -->
    <record id="delivery_label_rule_manager" model="ir.rule">
        <field name="name">发货标签：管理员规则</field>
        <field name="model_id" ref="model_delivery_label"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_delivery_label_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <!-- 标签模板规则：所有用户都可以查看激活的模板 -->
    <record id="delivery_label_template_rule_user" model="ir.rule">
        <field name="name">发货标签模板：用户规则</field>
        <field name="model_id" ref="model_delivery_label_template"/>
        <field name="domain_force">[('active', '=', True)]</field>
        <field name="groups" eval="[(4, ref('group_delivery_label_user'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <!-- 标签模板规则：管理员可以管理所有模板 -->
    <record id="delivery_label_template_rule_manager" model="ir.rule">
        <field name="name">发货标签模板：管理员规则</field>
        <field name="model_id" ref="model_delivery_label_template"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_delivery_label_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

</odoo>
