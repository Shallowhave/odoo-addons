# RFID 模块使用说明

## 📖 功能概述

本模块为 Odoo 生产制造提供 RFID 标签管理和防伪溯源功能。

**核心特性**：
- ✅ RFID 标签统一管理
- ✅ 自动编号生成
- ✅ 与生产订单、批次绑定
- ✅ 质检过程集成
- ✅ RFID 设备接口（可选）

## 🚀 快速开始

### 步骤 1: 创建质量检查点

1. 进入 **质量 → 质量控制 → 质量检查点**
2. 点击 **新建**
3. 填写基本信息：
   - **产品**: 选择需要 RFID 的产品
   - **操作**: Manufacturing（生产）
   - **测试类型**: 选择 **RFID 标签** ⭐
   - **工作中心**: 选择相应工序

4. **（可选）设备配置**：
   - 如果有 RFID 读写器硬件，勾选 **"需要 RFID 设备"**
   - 系统会在生成 RFID 时调用设备接口

5. 点击 **保存**

### 步骤 2: 生产过程中生成 RFID

当生产订单执行到 RFID 质检点时：

1. **质检对话框自动弹出**
2. 对话框显示：
   - ✅ 成品批次号
   - ✅ RFID 状态（待生成/已生成）
3. 点击 **"通过"** 按钮 ⭐
4. **系统自动为成品批次号生成 RFID 标签**
5. 质检完成，继续后续工序

> **说明**: RFID 标签会在质检通过时自动生成，无需手动操作

### 步骤 3: 查看生成的 RFID

**方法 1: 从生产订单查看**
- 打开生产订单
- 点击顶部的 **RFID 标签** 统计按钮
- 或查看 **RFID 标签** 标签页

**方法 2: 从 RFID 菜单查看**
- 进入 **RFID → RFID 标签**
- 搜索或筛选相关记录

## ⚙️ 配置选项

### RFID 编号规则

默认编号格式：`RFID000001`

可在 **设置 → 技术 → 序列与标识符 → 序列** 中修改：
- 找到 **RFID Tag Sequence**
- 修改前缀、填充位数等

### RFID 设备配置（可选）

如果有 RFID 读写器硬件：

1. 进入 **RFID → 配置 → RFID 设备配置**
2. 创建设备配置：
   - 设备名称
   - 设备类型（USB/串口/网络等）
   - 连接参数
3. 点击 **测试连接** 验证
4. 在质检点中勾选 **"需要 RFID 设备"**

> **注意**: 默认为模拟模式，可正常使用。实际硬件对接需要额外开发驱动。

## 📊 数据结构

### RFID 标签包含的信息

| 字段 | 说明 | 来源 |
|------|------|------|
| **RFID 编号** | 唯一编号 | 自动生成 |
| **产品** | 关联产品 | 生产订单 |
| **批次/序列号** | 产品批次 | 质检记录 |
| **生产订单** | 制造订单号 | 质检记录 |
| **生产日期** | 生成时间 | 自动记录 |
| **质检记录** | 关联质检 | 质检流程 |

### 溯源关系

```
生产订单 (MRP Production)
    ↓
质量检查 (Quality Check)
    ↓
RFID 标签 (RFID Tag)
    ↓
批次/序列号 (Stock Lot)
    ↓
产品 (Product)
```

## 🎯 使用场景

### 场景 1: 成品防伪

- 在成品包装工序设置 RFID 质检点
- 每个批次自动生成唯一 RFID
- 消费者可扫描验证真伪

### 场景 2: 生产溯源

- 在关键工序设置 RFID 质检点
- 记录生产时间、批次等信息
- 可追溯产品来源和生产过程

### 场景 3: 库存管理

- 为库存商品生成 RFID
- 快速扫描盘点
- 精准跟踪库存流向

## 💡 最佳实践

### 1. 质检点设置建议

- ✅ 在**最后一道工序**设置 RFID 质检点
- ✅ 确保该工序已生成批次/序列号
- ✅ 测试类型选择 **"RFID 标签"**

### 2. 批次号管理

- ✅ 使用自动批次号生成
- ✅ 确保批次号唯一
- ✅ 批次号规则清晰易识别

### 3. 工作流程优化

建议流程：
1. 生产订单 → 开始生产
2. 各工序质检
3. **最后工序** → RFID 质检点 → 生成 RFID
4. 完成生产

### 4. 硬件设备使用

如果使用 RFID 读写器：
- ✅ 先测试设备连接
- ✅ 在质检点勾选"需要 RFID 设备"
- ✅ 准备好实际的 RFID 标签/芯片
- ⚠️ 需要开发设备驱动（可联系技术支持）

## ❓ 常见问题

### Q1: 质检向导中没有"生成 RFID"按钮？

**原因**: 质检点的测试类型不是"RFID 标签"

**解决**:
1. 检查质检点配置
2. 确认 **测试类型** = **RFID 标签**
3. 重新触发质检

### Q2: 点击"生成 RFID"提示错误？

**可能原因**:
- ❌ 未关联生产订单 → 检查质检点配置
- ❌ 未设置批次号 → 填写批次/序列号
- ❌ 已生成过 RFID → 该批次已有 RFID，不能重复生成

### Q3: 如何批量生成 RFID？

**方法**:
- 通过质检流程，每个批次生成一个 RFID
- 每个序列号对应一个唯一的 RFID 标签

### Q4: RFID 编号可以自定义吗？

**可以**:
1. 进入 **设置 → 技术 → 序列**
2. 找到 **RFID Tag Sequence**
3. 修改前缀、位数等
4. 例如：`XQ-2024-000001`

### Q5: 不需要自动生成，只手动生成可以吗？

**可以**（当前配置）:
- ✅ 当前版本只支持手动生成
- ✅ 需要在质检向导中点击"生成 RFID"按钮
- ✅ 不会自动生成，完全由用户控制

### Q6: 可以查看 RFID 生成历史吗？

**可以**:
1. 进入 **RFID → RFID 标签**
2. 使用筛选器：
   - 按生产订单筛选
   - 按产品筛选
   - 按日期筛选
3. 或在生产订单中查看 RFID 标签列表

## 🔧 技术支持

### 开发者信息
- **作者**: Grit
- **网站**: https://ifangtech.com
- **版本**: 18.0.1.0.0

### 硬件对接

如需对接实际 RFID 读写器设备，请参考：
- `models/rfid_device.py` - 设备接口定义
- 继承 `RfidDeviceService` 实现具体驱动
- 或联系技术支持获取开发服务

### 模块依赖

必需模块：
- `mrp` - 生产制造
- `stock` - 库存管理
- `quality_control` - 质量控制

---

## 📝 更新日志

### v18.0.1.0.0
- ✅ 初始版本发布
- ✅ 基于 Odoo 18
- ✅ 质检集成（手动生成）
- ✅ RFID 设备接口预留
- ✅ Excel 批量导入

---

**祝使用愉快！** 🎉

